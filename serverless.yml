service: test

provider:
  name: aws
  runtime: nodejs12.x
  environment:
    NODE_ENV: dev

plugins:
  - serverless-auto-swagger
  - serverless-plugin-typescript
  - serverless-offline

package:
  exclude:
    - config/.env.stg
    - config/.env.pro
  include:
    - config/.env.dev

functions:
  Auth:
    handler: app/handler.authAuthorizer
  get:
    handler: app/handler.get
    events:
      - http:
          path: user
          method: GET
  register:
    handler: app/handler.register
    events:
      - http:
          path: user/register
          method: POST
  login:
    handler: app/handler.login
    events:
      - http:
          path: auth/login
          method: POST
  forgotpassword:
    handler: app/handler.forgotpassword
    events:
      - http:
          path: auth/forgot-password
          method: POST
  resetpassword:
    handler: app/handler.resetpassword
    events:
      - http:
          path: auth/reset-password
          method: POST
  changepassword:
    handler: app/handler.changepassword
    events:
      - http:
          path: auth/change-password
          method: POST
          authorizer:
            name: Auth
  updateprofile:
    handler: app/handler.changepassword
    events:
      - http:
          path: user/update-profile
          method: PATCH
          authorizer:
            name: Auth
custom:
  autoswagger:
    generateSwaggerOnDeploy?: true | false
    typefiles?: ["./src/types/typefile1.d.ts"]
